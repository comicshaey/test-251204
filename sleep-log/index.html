<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light" />
  <title>수면일지 막대그래프 달력</title>

  <link rel="icon" href="/static/favicon.ico" />

  <!-- 공통 스타일 -->
  <link rel="stylesheet" href="/static/style.css" />

  <!-- 수면일지 전용 스타일 -->
  <link rel="stylesheet" href="/sleep-log/sleep-log.css" />

  <!-- 사이트 공통 스크립트 -->
  <script src="/static/disable-copy.js"></script>
  <script src="/static/global-loader.js"></script>

  <!-- Firebase SDK (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- 수면일지 전용 JS -->
  <script src="/sleep-log/sleep-log.js" defer></script>
</head>

<body>
  <header class="site-header">
    <div class="shell">
      <h1>수면일지 막대그래프 달력</h1>
      <p class="sub">
        · 한 칸 = 1시간 (정오~다음날 정오)<br/>
        · PC/태블릿/휴대폰 어디서든 기록·조회 가능<br/>
        · 밤 수면 / 중간 각성 / 낮잠 / 약 복용 표시
      </p>
    </div>
  </header>

  <main>
    <div class="shell">

      <!-- 입력 영역 -->
      <section class="section">
        <h2>기록 입력</h2>

        <div class="sleep-controls">

          <div>
            <div class="field-label">기준 날짜</div>
            <input type="date" id="date-input">
          </div>

          <div>
            <div class="field-label">시작 시간</div>
            <input type="time" id="start-time">
          </div>

          <div>
            <div class="field-label">끝 시간 (약 복용은 비워도 됨)</div>
            <input type="time" id="end-time">
          </div>

          <div>
            <div class="field-label">기록 종류</div>
            <div class="sleep-type-group">
              <label><input type="radio" name="segment-type" value="night" checked> 밤 수면</label>
              <label><input type="radio" name="segment-type" value="awake"> 깨어있음</label>
              <label><input type="radio" name="segment-type" value="nap"> 낮잠</label>
              <label><input type="radio" name="segment-type" value="med"> 약 복용</label>
            </div>
          </div>

          <div>
            <button class="btn primary" id="add-btn">달력에 추가</button>
          </div>

        </div>

        <!-- 범례 -->
        <div class="sleep-legend">
          <span class="legend-chip"><span class="legend-color legend-night"></span> 밤 수면</span>
          <span class="legend-chip"><span class="legend-color legend-awake"></span> 깨어있음·중간각성</span>
          <span class="legend-chip"><span class="legend-color legend-nap"></span> 낮잠</span>
          <span class="legend-pill-wrap">
            <span class="legend-pill"></span> 약 복용
          </span>
        </div>

        <p class="sleep-help">
          · 날짜 기준은 <b>정오 12시</b>입니다 (정오→밤→새벽→정오).<br/>
          · 예: 23:00~06:00 수면 → 해당 날짜 줄에 그대로 표시됩니다.<br/>
          · 모든 기록은 Firebase DB에 저장되어 어떤 기기에서도 열람 가능합니다.
        </p>

        <!-- 데이터 제어 버튼 -->
        <div class="sleep-data-controls">
          <button class="btn-ghost" id="clear-all-btn">전체 데이터 삭제</button>
          <button class="btn-ghost" id="dump-json-btn">JSON 보기</button>
        </div>

        <textarea id="json-dump"
          style="margin-top:8px;width:100%;min-height:100px;display:none;font-size:0.75rem;"></textarea>

      </section>

      <!-- 달력 영역 -->
      <section class="section">
        <h2>수면 달력</h2>

        <div class="table-wrap">
          <table class="sleep-table" id="sleep-table">
            <thead>
              <tr id="sleep-header-row">
                <th class="date-col">날짜</th>
              </tr>
            </thead>
            <tbody id="sleep-body">
              <!-- JS가 데이터 렌더링 -->
            </tbody>
          </table>
        </div>

      </section>

    </div>
  </main>
 <script src="/static/global-loader.js?v=1"></script>
</body>
</html>
